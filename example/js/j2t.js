String.prototype.format=function(){var args=arguments;return this.replace(/{(\d+)}/g,function(match,number){return typeof args[number]!='undefined'?args[number]:'{'+number+'}';});};function ConvertJsonToTable(parsedJson,tableId,tableClassName,linkText){var italic='<i>{0}</i>';var link=linkText?'<a href="{0}">'+linkText+'</a>':'<a href="{0}">{0}</a>';var idMarkup=tableId?' id="'+tableId+'"':'';var classMarkup=tableClassName?' class="'+tableClassName+'"':'';var tbl='<table border="1" cellpadding="1" cellspacing="1"'+idMarkup+classMarkup+'>{0}{1}</table>';var th='<thead>{0}</thead>';var tb='<tbody>{0}</tbody>';var tr='<tr>{0}</tr>';var thRow='<th>{0}</th>';var tdRow='<td>{0}</td>';var thCon='';var tbCon='';var trCon='';if(parsedJson){var isStringArray=typeof(parsedJson[0])=='string';var headers;if(isStringArray)thCon+=thRow.format('value');else
{if(typeof(parsedJson[0])=='object'){headers=array_keys(parsedJson[0]);for(i=0;i<headers.length;i++)thCon+=thRow.format(headers[i]);}}th=th.format(tr.format(thCon));if(isStringArray){for(i=0;i<parsedJson.length;i++){tbCon+=tdRow.format(parsedJson[i]);trCon+=tr.format(tbCon);tbCon='';}}else
{if(headers){var urlRegExp=new RegExp(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig);var javascriptRegExp=new RegExp(/(^javascript:[\s\S]*;$)/ig);for(i=0;i<parsedJson.length;i++){for(j=0;j<headers.length;j++){var value=parsedJson[i][headers[j]];var isUrl=urlRegExp.test(value)||javascriptRegExp.test(value);if(isUrl)tbCon+=tdRow.format(link.format(value));else
{if(value){if(typeof(value)=='object'){tbCon+=tdRow.format(ConvertJsonToTable(eval(value.data),value.tableId,value.tableClassName,value.linkText));}else{tbCon+=tdRow.format(value);}}else{tbCon+=tdRow.format(italic.format(value).toUpperCase());}}}trCon+=tr.format(tbCon);tbCon='';}}}tb=tb.format(trCon);tbl=tbl.format(th,tb);return tbl;}return null;}function array_keys(input,search_value,argStrict){var search=typeof search_value!=='undefined',tmp_arr=[],strict=!!argStrict,include=true,key='';if(input&&typeof input==='object'&&input.change_key_case){return input.keys(search_value,argStrict);}for(key in input){if(input.hasOwnProperty(key)){include=true;if(search){if(strict&&input[key]!==search_value)include=false;else if(input[key]!=search_value)include=false;}if(include)tmp_arr[tmp_arr.length]=key;}}return tmp_arr;}